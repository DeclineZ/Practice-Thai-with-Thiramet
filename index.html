<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <title>I love Thailand</title>
  <style>
    *{box-sizing:border-box;font-family:sans-serif}
    body{max-width:720px;margin:2rem auto;padding:0 1rem;text-align:center}
    h1{font-size:1.9rem;margin-bottom:1rem}
    #trainer{display:none;margin-top:2.5rem}
    #answerInput{width:100%;padding:.7rem;font-size:1.25rem;border:2px solid #ccc;border-radius:6px}
    button{cursor:pointer;border:none;border-radius:6px;padding:.65rem 1.4rem;font-size:1rem;margin:.5rem}
    button:not(:disabled):hover{filter:brightness(1.05)}
    #startBtn      {background:#673ab7;color:#fff}
    #submitBtn     {background:#4caf50;color:#fff}
    #repeatBtn     {background:#2196f3;color:#fff}
    #showAnswerBtn {background:#9e9e9e;color:#fff}
    #feedback{height:1.6rem;margin-top:.7rem;font-weight:bold}
    #voiceSelect{margin-top:1rem;padding:.5rem;font-size:1rem}
  </style>
</head>
<body>
  <h1>ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­</h1>

  <label for="voiceSelect">Voice:</label>
  <select id="voiceSelect"></select>

  <button id="startBtn">Start</button>

  <div id="trainer">
    <p id="counter"></p>
    <div>
      <button id="repeatBtn"      title="à¸Ÿà¸±à¸‡à¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡">ğŸ”Š à¸Ÿà¸±à¸‡à¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡</button>
      <button id="showAnswerBtn"  title="à¸”à¸¹à¸„à¸³à¸•à¸­à¸š">ğŸ‘ï¸ à¸”à¸¹à¸„à¸³à¸•à¸­à¸š</button>
    </div>
    <form id="answerForm" autocomplete="off">
      <input id="answerInput" type="text" placeholder="à¸à¸´à¸¡à¸à¹Œà¸„à¸³à¸—à¸µà¹ˆà¹„à¸”à¹‰à¸¢à¸´à¸™à¸—à¸µà¹ˆà¸™à¸µà¹ˆâ€¦" required>
      <button id="submitBtn" type="submit">à¸ªà¹ˆà¸‡à¸„à¸³à¸•à¸­à¸š</button>
    </form>
    <p id="feedback"></p>
  </div>

  <section id="wrongBox" style="margin-top:2rem;text-align:left">
  <h3>à¸„à¸³à¸—à¸µà¹ˆà¸•à¸­à¸šà¸œà¸´à¸”</h3>
  <ul id="wrongList" style="margin:0;padding-inline-start:1.2rem"></ul>
</section>

<script type="module">
const WORDS = [ "à¹„à¸‹à¸‹à¹Œ","à¸‚à¹‚à¸¡à¸¢","à¸‡à¸¹à¸ªà¸§à¸±à¸”","à¹à¸„à¸£à¹Œà¸£à¸­à¸•","à¸‚à¸°à¸¡à¸±à¸à¹€à¸‚à¸¡à¹‰à¸™","à¹€à¸‡à¸´à¸™à¸—à¸”à¸£à¸­à¸‡à¸ˆà¹ˆà¸²à¸¢","à¸ªà¸°à¹€à¸«à¸¥à¹ˆà¸­","à¸‚à¸²à¸”à¸”à¸¸à¸¥","à¸ˆà¸‡à¸à¸£à¸¡",
"à¹à¸­à¸›à¹€à¸›à¸´à¸¥","à¸‚à¹‰à¸²à¸§à¹€à¸«à¸™à¸µà¸¢à¸§à¸¡à¸¹à¸™","à¸ˆà¸°à¸‡à¸­à¸¢","à¸à¸‡à¸ªà¸¸à¸¥","à¹€à¸‚à¹‰à¸²à¸Œà¸²à¸™","à¸ˆà¸±à¸à¸ˆà¸±à¹ˆà¸™","à¸à¸","à¹„à¸‚à¹ˆà¸¡à¸¸à¸","à¸ˆà¸±à¸‡à¹„à¸£","à¸ˆà¸±à¸à¹„à¸£","à¸à¸£à¸°à¹€à¸à¸²à¸°","à¸„à¸—à¸²",
"à¸ˆà¸²à¸£à¸°à¸šà¸µ","à¸ˆà¸£à¸°à¸šà¸µ","à¸à¹‹à¸§à¸¢à¹€à¸•à¸µà¹‹à¸¢à¸§","à¸à¹Šà¸§à¸¢à¹€à¸•à¸µà¹‹à¸¢à¸§","à¸„à¸£à¸¸à¸ à¸±à¸“à¸‘à¹Œ","à¸ˆà¸³à¸™à¸‡","à¸à¸°à¹€à¸—à¸¢","à¸„à¸¥à¸´à¸™à¸´à¸","à¸Šà¸¡à¸à¸¹à¹ˆà¸¡à¹ˆà¸²à¹€à¸«à¸¡à¸µà¹ˆà¸¢à¸§","à¸à¸°à¸šà¸±à¸‡à¸¥à¸¡",
"à¸„à¸£à¸¸à¸¡à¹€à¸„à¸£à¸·à¸­","à¸„à¸¥à¸¸à¸¡à¹€à¸„à¸£à¸·à¸­","à¸‹à¸²à¸«à¸£à¸´à¹ˆà¸¡","à¸‹à¹ˆà¸²à¸«à¸£à¸´à¹ˆà¸¡","à¸à¸°à¸à¸£à¸´à¸š","à¸„à¸³à¸™à¸§à¸“","à¹€à¸‹à¹‡à¸™à¸Šà¸·à¹ˆà¸­","à¸à¸°à¹€à¸à¸£à¸²","à¸„à¸¸à¸à¸à¸µà¹‰","à¹à¸‹à¹ˆà¸š","à¸à¸°à¸«à¸£à¸µà¹ˆ",
"à¹€à¸„à¹‰à¸","à¸”à¸­à¸à¸ˆà¸±à¸™","à¸à¸³à¹€à¸«à¸™à¹‡à¸ˆ","à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸¢à¸™à¸•à¹Œ","à¸”à¸­à¸à¹„à¸¡à¹‰à¸ˆà¸±à¸™à¸—à¹Œ","à¹€à¸à¸¡","à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸£à¸²à¸‡","à¸•à¸±à¸à¸šà¸²à¸•à¸£","à¹€à¸à¸©à¸µà¸¢à¸“à¸­à¸²à¸¢à¸¸",
"à¹à¸„à¹‡à¸•à¸•à¸²à¸¥à¹‡à¸­à¸","à¸•à¸²à¸™à¸‚à¹‚à¸¡à¸¢","à¹€à¸à¸©à¸µà¸¢à¸™à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­","à¹à¸„à¸šà¸«à¸¡à¸¹","à¸—à¸­à¸™à¸‹à¸´à¸¥","à¹€à¸à¸©à¸µà¸¢à¸£à¸ªà¸¡à¸¸à¸—à¸£","à¹à¸„à¹‡à¸›à¸Šà¸±à¸™","à¸—à¸°à¹€à¸¥à¸ªà¸²à¸š","à¹€à¸à¸ªà¸£",
"à¹à¸„à¹‡à¸›à¹€à¸Šà¸­à¸£à¹Œ","à¸—à¸¹à¸•","à¹€à¸à¸²à¸•à¹Œ","à¹‚à¸„à¸•à¸£","à¹€à¸—à¹ˆ","à¹à¸à¸‡à¸šà¸§à¸”","à¹‚à¸„à¸§à¸•à¸²","à¹€à¸—à¸à¹à¸„à¸£à¹Œ","à¸à¸¥à¹‰à¸§à¸¢à¸šà¸§à¸Šà¸Šà¸µ","à¸†à¸£à¸²à¸§à¸²à¸ª","à¹€à¸—à¹‰à¸²à¸„à¸§à¸²à¸¡",
"à¹€à¸—à¸´à¸”","à¹€à¸›à¸­à¸£à¹Œà¹€à¸‹à¹‡à¸™à¸•à¹Œ","à¸£à¸ªà¸Šà¸²à¸•à¸´","à¹à¸—à¸£à¸à¹à¸‹à¸‡","à¹à¸›à¸£à¸à¸±à¸à¸•à¸£à¹Œ","à¸£à¸±à¸à¸ªà¸²à¸¡à¹€à¸ªà¹‰à¸²","à¸˜à¸³à¸£à¸‡","à¸œà¸±à¸”à¹„à¸—à¸¢","à¸£à¸²à¸‡ à¹†","à¸™à¸à¸­à¸´à¸™à¸—à¸£à¸µ",
"à¸œà¸±à¸”à¸œà¹ˆà¸­à¸™","à¹€à¸¥à¸·à¸­à¸”à¸à¸šà¸›à¸²à¸","à¸™à¸­à¸•","à¸œà¸±à¸”à¸§à¸±à¸™à¸›à¸£à¸°à¸à¸±à¸™à¸à¸£à¸¸à¹ˆà¸‡","à¸¥à¸³à¹„à¸¢","à¸™à¸°à¸„à¸°","à¸à¸°à¹à¸™à¸‡","à¸¥à¸´à¸”à¸£à¸­à¸™","à¸™à¸²à¸™à¸²","à¸à¸±à¸¨à¸”à¸µ","à¸¥à¸¹à¸à¸™à¸´à¸¡à¸´à¸•",
"à¸™à¹‰à¸³à¹à¸‚à¹‡à¸‡à¹„à¸ª","à¸à¸²à¸à¸¢à¹Œà¸«à¸™à¸±à¸‡","à¸¥à¸¹à¸à¸šà¸²à¸¨à¸à¹Œ","à¸™à¹‰à¸³à¸¡à¸±à¸™à¸à¹Šà¸²à¸”","à¸à¸´à¸¨à¸§à¸²à¸ª","à¹€à¸¥à¸´à¸à¸£à¸²","à¹‚à¸™à¹‰à¸•","à¸à¸´à¸ªà¸¡à¸±à¸¢","à¹„à¸¥à¸à¹Œ","à¸šà¹ˆà¸§à¸‡à¸šà¸²à¸¨",
"à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™","à¸§à¸±à¸™à¸—à¸¢à¸«à¸±à¸•à¸–à¹Œ","à¸šà¸­à¸£à¸°à¹€à¸à¹‡à¸”","à¸Ÿà¸¸à¸•à¸à¸²à¸—","à¸§à¸±à¸™à¸—à¸¢à¸²à¸§à¸¸à¸˜","à¸šà¸±à¸‡à¸ªà¸¸à¸à¸¸à¸¥","à¹€à¸Ÿà¸‹à¸šà¸¸à¹Šà¸","à¸§à¸´à¹ˆà¸‡à¹€à¸›à¸µà¹‰à¸¢à¸§","à¸šà¸²à¸”à¸—à¸°à¸¢à¸±à¸",
"à¸ à¸²à¸à¸¢à¸™à¸•à¸£à¹Œ","à¸§à¸´à¹ˆà¸‡à¸œà¸¥à¸±à¸”","à¸šà¸³à¹€à¸«à¸™à¹‡à¸ˆ","à¸¡à¸‡à¸à¸¸à¸","à¸§à¸´à¸”à¸µà¹‚à¸­","à¸šà¸´à¸“à¸‘à¸šà¸²à¸•","à¸¡à¸“à¸‘à¸›","à¸§à¸´à¸«à¸²à¸£à¸„à¸”","à¸šà¸¸à¸„à¸¥à¸²à¸à¸£","à¸¡à¸±à¸„à¸„à¸¸à¹€à¸—à¸¨à¸à¹Œ",
"à¸§à¸µà¸”à¸´à¸—à¸±à¸¨à¸™à¹Œ","à¹€à¸šà¸à¸ˆà¹€à¸à¸ª","à¸¡à¸±à¸„à¸™à¸²à¸¢à¸","à¹€à¸§à¸—à¸¡à¸™à¸•à¸£à¹Œ","à¹€à¸šà¸£à¸","à¸¡à¸±à¸”à¸•à¸£à¸²à¸ªà¸±à¸‡","à¹€à¸§à¸™à¸„à¸·à¸™","à¹‚à¸š","à¸¡à¸¸à¸à¸•à¸¥à¸","à¸¨à¸µà¸£à¸©à¸°","à¸›à¸£à¸°à¸”à¸´à¸”à¸›à¸£à¸°à¸”à¸­à¸¢",
"à¹à¸¡à¹ˆà¹‚à¸à¸ªà¸","à¸ªà¹„à¸š","à¸›à¸¥à¸²à¸ªà¹€à¸•à¸­à¸£à¹Œ","à¸¢à¹ˆà¸­à¸¡à¹€à¸¢à¸²","à¸ªà¸±à¸‡à¹€à¸à¸•","à¸›à¸´à¸à¸™à¸´à¸","à¸£à¸–à¹€à¸¡à¸¥à¹Œ","à¸ªà¸±à¸‡à¹€à¸‚à¸›","à¸ªà¸±à¸™à¹‚à¸”à¸©","à¹‚à¸«à¸£à¸°à¸à¸²","à¸­à¸¸à¸šà¸²à¸—à¸§à¹Œ",
"à¸ªà¸±à¸¡à¸¡à¸™à¸²","à¸­à¸‡à¸„à¸Šà¸²à¸•","à¹à¸­à¸›à¸à¸¥à¸´à¹€à¸„à¸Šà¸±à¸™","à¸ªà¸²à¸šà¹€à¸ªà¸·à¹‰à¸­","à¸­à¸™à¸¸à¸à¸²à¸•","à¸›à¸²à¸£à¸²à¸Šà¸´à¸","à¸ªà¸²à¸›à¹à¸Šà¹ˆà¸‡","à¸­à¹€à¸™à¸à¸›à¸£à¸°à¸ªà¸‡à¸„à¹Œ","à¹„à¸­à¸¨à¸à¸£à¸µà¸¡","à¸ªà¸²à¸¢à¸ªà¸´à¸à¸ˆà¸™à¹Œ",
"à¸­à¸­à¸Ÿà¸Ÿà¸´à¸¨","à¸à¸£à¸°à¸—à¸°","à¹€à¸«à¸¥à¹‡à¸à¹ƒà¸™","à¸­à¸±à¸à¸Šà¸±à¸™","à¸à¸°à¸¥à¸°à¹à¸¡","à¸ªà¸³à¸­à¸²à¸‡","à¸­à¸±à¸›à¸£à¸µà¸¢à¹Œ","à¸à¸´à¸ˆà¸ˆà¸°à¸¥à¸±à¸à¸©à¸“à¸°","à¸ªà¸´à¸£à¸´à¸¡à¸‡à¸„à¸¥","à¸­à¸²à¹€à¸ˆà¸µà¸¢à¸™","à¸à¸¸à¸¢à¸Šà¹ˆà¸²à¸¢",
"à¹€à¸ªà¸™à¹ˆà¸«à¹Œ","à¸­à¸²à¸™à¸´à¸ªà¸‡à¸ªà¹Œ","à¸‚à¸¶à¹‰à¸™à¸‰à¹ˆà¸²à¸¢","à¸«à¸¥à¸‡à¹ƒà¸«à¸¥","à¸­à¸²à¹€à¸à¸¨","à¸„à¸£à¸´à¸ªà¸•à¹Œà¸¨à¸±à¸à¸£à¸²à¸Š","à¸«à¸¥à¸±à¸šà¹ƒà¸«à¸¥","à¸­à¸´à¹€à¸¥à¹‡à¸à¸—à¸£à¸­à¸™à¸´à¸à¸ªà¹Œ","à¸šà¸²à¸£à¹Œà¹‚à¸„à¸”",
"à¹€à¸«à¸¥à¹‡à¸à¹„à¸«à¸¥","à¸­à¸µà¹€à¸¡à¸¥","à¸ˆà¸±à¸•à¸¸à¸£à¸±à¸ª","à¸”à¸´à¸¥à¸´à¹€à¸§à¸­à¸£à¸µ","à¸–à¸±à¹ˆà¸§à¸à¸¹","à¸™à¸±à¸™à¸—à¸™à¸²à¸à¸²à¸£","à¸šà¸¥à¹‡à¸­à¸","à¸›à¸£à¸°à¸ˆà¸±à¸™à¸«à¸™à¹‰à¸²","à¸›à¸£à¸°à¸•à¸´à¸¡à¸²à¸à¸£à¸£à¸¡","à¹à¸œà¹ˆà¸«à¸¥à¸²",
"à¸¡à¸«à¸£à¸ªà¸","à¸¡à¸µà¹ˆà¸ªà¸±à¹‰à¸§","à¸£à¸±à¸‡à¸ªà¸£à¸£à¸„à¹Œ","à¸­à¸±à¸›à¹€à¸”à¸•","à¹€à¸”à¹‡à¸à¹à¸§à¹‰à¸™" ];

const voiceSelect     = document.getElementById('voiceSelect');
const startBtn        = document.getElementById('startBtn');
const trainer         = document.getElementById('trainer');
const counter         = document.getElementById('counter');
const repeatBtn       = document.getElementById('repeatBtn');
const showAnswerBtn   = document.getElementById('showAnswerBtn');
const answerForm      = document.getElementById('answerForm');
const answerInput     = document.getElementById('answerInput');
const feedback        = document.getElementById('feedback');

let selectedVoice     = null;

function buildVoiceList() {
  const voices = speechSynthesis.getVoices().filter(v => v.lang?.startsWith('th'));
  voiceSelect.innerHTML = voices.map((v,i) =>
    `<option value="${i}">${v.name}${v.name.match(/kang|à¸à¸±à¸‡|à¸à¸§|Female|à¸«à¸à¸´à¸‡/i) ? ' (F)' :
                                   v.name.match(/sir|à¸ªà¸´à¸£à¸´|Male|à¸Šà¸²à¸¢/i)   ? ' (M)' : ''}</option>`
  ).join('');
  const firstFemaleIdx = voices.findIndex(v => /female|à¸«à¸à¸´à¸‡|kang|à¸à¸±à¸‡|à¸à¸§/i.test(v.name));
  voiceSelect.selectedIndex = firstFemaleIdx >= 0 ? firstFemaleIdx : 0;
  selectedVoice = voices[voiceSelect.selectedIndex] || null;
}

speechSynthesis.onvoiceschanged = buildVoiceList;
buildVoiceList();  

voiceSelect.onchange = () => {
  const voices = speechSynthesis.getVoices().filter(v => v.lang?.startsWith('th'));
  selectedVoice = voices[voiceSelect.value] || null;
};

const speak = word => {
  const u = new SpeechSynthesisUtterance(`à¸„à¸³à¸§à¹ˆà¸² ${word}`);
  u.lang = 'th-TH';
  if (selectedVoice) u.voice = selectedVoice;
  speechSynthesis.cancel();
  speechSynthesis.speak(u);
};

const shuffle = a => { for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];} return a; };

let queue=[], current='', showingAnswer=false;
const updateCounter = () => counter.textContent = `à¹€à¸«à¸¥à¸·à¸­à¸„à¸³: ${queue.length}`;

function nextWord(){
  showingAnswer = false;
  if (!queue.length){
    trainer.innerHTML = '<h2>à¹€à¸ªà¸£à¹‡à¸ˆà¸ªà¸´à¹‰à¸™! âœ”ï¸</h2>';
    return;
  }
  current = queue.shift();
  updateCounter();
  answerInput.value=''; answerInput.focus();
  feedback.textContent='';
  speak(current);
  updateCounter();
}

const wrongList  = document.getElementById('wrongList');
const wrongWords = new Set();               

function addWrong(word){                    
  if(!wrongWords.has(word)){
    wrongWords.add(word);
    wrongList.insertAdjacentHTML('beforeend', `<li>${word}</li>`);
  }
}

/* â”€â”€â”€â”€â”€ 6.  events â”€â”€â”€â”€â”€ */
answerForm.addEventListener('submit', e => {
  e.preventDefault();
  const typed = answerInput.value.trim();

  if (typed === current) {
    feedback.textContent = 'âœ”ï¸ à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡';
    updateCounter();
    nextWord();
  } else {
  feedback.textContent = 'âŒ à¸¥à¸­à¸‡à¹ƒà¸«à¸¡à¹ˆâ€¦';
  addWrong(current);

  /* âœ… push only once */
  if (!queue.includes(current)) {      // â† NEW
    queue.push(current);               // add a *single* copy for later review
    updateCounter();
  }

  speak(current);
  answerInput.select();
}
});

repeatBtn.onclick    = () => speak(current);

showAnswerBtn.onclick = () => {
  if (showingAnswer) return;

  feedback.textContent = `â†’ ${current}`;
  addWrong(current);

  /* âœ… avoid duplicates */
  if (!queue.includes(current)) {      // â† NEW
    queue.push(current);
    updateCounter();
  }

  showingAnswer = true;
  answerInput.focus();
};

startBtn.onclick = () => {
  queue = shuffle([...WORDS]);
  startBtn.style.display='none';
  trainer.style.display='block';
  nextWord();
};
</script>
</body>
</html>
