<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <title>Thai words often gotten wrong</title>
  <style>
    *{box-sizing:border-box;font-family: "Noto Sans Thai Looped", sans-serif;}
    body{max-width:720px;margin:2rem auto;padding:0 1rem;text-align:center}
    h1{font-size:1.9rem;margin-bottom:1rem}
    #trainer{display:none;margin-top:2.5rem}
    #answerInput{width:100%;padding:.7rem;font-size:1.25rem;border:2px solid #ccc;border-radius:6px}
    button{cursor:pointer;border:none;border-radius:6px;padding:.65rem 1.4rem;font-size:1rem;margin:.5rem}
    button:not(:disabled):hover{filter:brightness(1.05)}
    #startBtn      {background:#673ab7;color:#fff}
    #submitBtn     {background:#4caf50;color:#fff}
    #repeatBtn     {background:#2196f3;color:#fff}
    #showAnswerBtn {background:#9e9e9e;color:#fff}
    #feedback{height:1.6rem;margin-top:.7rem;font-weight:bold}
    #voiceSelect{margin-top:1rem;padding:.5rem;font-size:1rem}
  </style>
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai+Looped:wght@100..900&display=swap" rel="stylesheet">
</head>
<body>
  <h1>à¸„à¸³à¸—à¸µà¹ˆà¸¡à¸±à¸à¹€à¸‚à¸µà¸¢à¸™à¸œà¸´à¸”</h1>

  <label for="voiceSelect">Voice:</label>
  <select id="voiceSelect"></select>

  <button id="startBtn">Start</button>

  <div id="trainer">
    <p id="counter"></p>
    <progress id="progressBar" value="0" style="width:100%;height:18px"></progress>
<div style="margin-top:.4rem;font-weight:bold">
  <span id="leftCounter"></span> |
  <span id="wrongCounter"></span>
</div>
    <div>
      <button id="repeatBtn"      title="à¸Ÿà¸±à¸‡à¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡">ğŸ”Š à¸Ÿà¸±à¸‡à¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡</button>
      <button id="showAnswerBtn"  title="à¸”à¸¹à¸„à¸³à¸•à¸­à¸š">ğŸ‘ï¸ à¸”à¸¹à¸„à¸³à¸•à¸­à¸š</button>
    </div>
    <form id="answerForm" autocomplete="off">
      <input id="answerInput" type="text" placeholder="à¸à¸´à¸¡à¸à¹Œà¸„à¸³à¸—à¸µà¹ˆà¹„à¸”à¹‰à¸¢à¸´à¸™à¸—à¸µà¹ˆà¸™à¸µà¹ˆâ€¦" required>
      <button id="submitBtn" type="submit">à¸ªà¹ˆà¸‡à¸„à¸³à¸•à¸­à¸š</button>
    </form>
    <p id="feedback"></p>
  </div>

  <section id="wrongBox" style="margin-top:2rem;text-align:left">
  <h3>à¸„à¸³à¸—à¸µà¹ˆà¸•à¸­à¸šà¸œà¸´à¸”</h3>
  <ul id="wrongList" style="margin:0;padding-inline-start:1.2rem"></ul>
</section>

<script type="module">
/*â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  1.  WORD LIST
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€*/
const WORDS = [ "à¹„à¸‹à¸‹à¹Œ","à¸‚à¹‚à¸¡à¸¢","à¸‡à¸¹à¸ªà¸§à¸±à¸”","à¹à¸„à¸£à¹Œà¸£à¸­à¸•","à¸‚à¸°à¸¡à¸±à¸à¹€à¸‚à¸¡à¹‰à¸™","à¹€à¸‡à¸´à¸™à¸—à¸”à¸£à¸­à¸‡à¸ˆà¹ˆà¸²à¸¢","à¸ªà¸°à¹€à¸«à¸¥à¹ˆà¸­","à¸‚à¸²à¸”à¸”à¸¸à¸¥","à¸ˆà¸‡à¸à¸£à¸¡",
"à¹à¸­à¸›à¹€à¸›à¸´à¸¥","à¸‚à¹‰à¸²à¸§à¹€à¸«à¸™à¸µà¸¢à¸§à¸¡à¸¹à¸™","à¸ˆà¸°à¸‡à¸­à¸¢","à¸à¸‡à¸ªà¸¸à¸¥","à¹€à¸‚à¹‰à¸²à¸Œà¸²à¸™","à¸ˆà¸±à¸à¸ˆà¸±à¹ˆà¸™","à¸à¸","à¹„à¸‚à¹ˆà¸¡à¸¸à¸","à¸ˆà¸±à¸‡à¹„à¸£","à¸ˆà¸±à¸à¹„à¸£","à¸à¸£à¸°à¹€à¸à¸²à¸°","à¸„à¸—à¸²",
"à¸ˆà¸²à¸£à¸°à¸šà¸µ","à¸ˆà¸£à¸°à¸šà¸µ","à¸à¹‹à¸§à¸¢à¹€à¸•à¸µà¹‹à¸¢à¸§","à¸à¹Šà¸§à¸¢à¹€à¸•à¸µà¹‹à¸¢à¸§","à¸„à¸£à¸¸à¸ à¸±à¸“à¸‘à¹Œ","à¸ˆà¸³à¸™à¸‡","à¸à¸°à¹€à¸—à¸¢","à¸„à¸¥à¸´à¸™à¸´à¸","à¸Šà¸¡à¸à¸¹à¹ˆà¸¡à¹ˆà¸²à¹€à¸«à¸¡à¸µà¹ˆà¸¢à¸§","à¸à¸°à¸šà¸±à¸‡à¸¥à¸¡",
"à¸„à¸£à¸¸à¸¡à¹€à¸„à¸£à¸·à¸­","à¸„à¸¥à¸¸à¸¡à¹€à¸„à¸£à¸·à¸­","à¸‹à¸²à¸«à¸£à¸´à¹ˆà¸¡","à¸‹à¹ˆà¸²à¸«à¸£à¸´à¹ˆà¸¡","à¸à¸°à¸à¸£à¸´à¸š","à¸„à¸³à¸™à¸§à¸“","à¹€à¸‹à¹‡à¸™à¸Šà¸·à¹ˆà¸­","à¸à¸°à¹€à¸à¸£à¸²","à¸„à¸¸à¸à¸à¸µà¹‰","à¹à¸‹à¹ˆà¸š","à¸à¸°à¸«à¸£à¸µà¹ˆ",
"à¹€à¸„à¹‰à¸","à¸”à¸­à¸à¸ˆà¸±à¸™","à¸à¸³à¹€à¸«à¸™à¹‡à¸ˆ","à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸¢à¸™à¸•à¹Œ","à¸”à¸­à¸à¹„à¸¡à¹‰à¸ˆà¸±à¸™à¸—à¹Œ","à¹€à¸à¸¡","à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸£à¸²à¸‡","à¸•à¸±à¸à¸šà¸²à¸•à¸£","à¹€à¸à¸©à¸µà¸¢à¸“à¸­à¸²à¸¢à¸¸",
"à¹à¸„à¹‡à¸•à¸•à¸²à¸¥à¹‡à¸­à¸","à¸•à¸²à¸™à¸‚à¹‚à¸¡à¸¢","à¹€à¸à¸©à¸µà¸¢à¸™à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­","à¹à¸„à¸šà¸«à¸¡à¸¹","à¸—à¸­à¸™à¸‹à¸´à¸¥","à¹€à¸à¸©à¸µà¸¢à¸£à¸ªà¸¡à¸¸à¸—à¸£","à¹à¸„à¹‡à¸›à¸Šà¸±à¸™","à¸—à¸°à¹€à¸¥à¸ªà¸²à¸š","à¹€à¸à¸ªà¸£",
"à¹à¸„à¹‡à¸›à¹€à¸Šà¸­à¸£à¹Œ","à¸—à¸¹à¸•","à¹€à¸à¸²à¸•à¹Œ","à¹‚à¸„à¸•à¸£","à¹€à¸—à¹ˆ","à¹à¸à¸‡à¸šà¸§à¸”","à¹‚à¸„à¸§à¸•à¸²","à¹€à¸—à¸à¹à¸„à¸£à¹Œ","à¸à¸¥à¹‰à¸§à¸¢à¸šà¸§à¸Šà¸Šà¸µ","à¸†à¸£à¸²à¸§à¸²à¸ª","à¹€à¸—à¹‰à¸²à¸„à¸§à¸²à¸¡",
"à¹€à¸—à¸´à¸”","à¹€à¸›à¸­à¸£à¹Œà¹€à¸‹à¹‡à¸™à¸•à¹Œ","à¸£à¸ªà¸Šà¸²à¸•à¸´","à¹à¸—à¸£à¸à¹à¸‹à¸‡","à¹à¸›à¸£à¸à¸±à¸à¸•à¸£à¹Œ","à¸£à¸±à¸à¸ªà¸²à¸¡à¹€à¸ªà¹‰à¸²","à¸˜à¸³à¸£à¸‡","à¸œà¸±à¸”à¹„à¸—à¸¢","à¸£à¸²à¸‡ à¹†","à¸™à¸à¸­à¸´à¸™à¸—à¸£à¸µ",
"à¸œà¸±à¸”à¸œà¹ˆà¸­à¸™","à¹€à¸¥à¸·à¸­à¸”à¸à¸šà¸›à¸²à¸","à¸™à¸­à¸•","à¸œà¸±à¸”à¸§à¸±à¸™à¸›à¸£à¸°à¸à¸±à¸™à¸à¸£à¸¸à¹ˆà¸‡","à¸¥à¸³à¹„à¸¢","à¸™à¸°à¸„à¸°","à¸à¸°à¹à¸™à¸‡","à¸¥à¸´à¸”à¸£à¸­à¸™","à¸™à¸²à¸™à¸²","à¸à¸±à¸¨à¸”à¸µ","à¸¥à¸¹à¸à¸™à¸´à¸¡à¸´à¸•",
"à¸™à¹‰à¸³à¹à¸‚à¹‡à¸‡à¹„à¸ª","à¸à¸²à¸à¸¢à¹Œà¸«à¸™à¸±à¸‡","à¸¥à¸¹à¸à¸šà¸²à¸¨à¸à¹Œ","à¸™à¹‰à¸³à¸¡à¸±à¸™à¸à¹Šà¸²à¸”","à¸à¸´à¸¨à¸§à¸²à¸ª","à¹€à¸¥à¸´à¸à¸£à¸²","à¹‚à¸™à¹‰à¸•","à¸à¸´à¸ªà¸¡à¸±à¸¢","à¹„à¸¥à¸à¹Œ","à¸šà¹ˆà¸§à¸‡à¸šà¸²à¸¨",
"à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™","à¸§à¸±à¸™à¸—à¸¢à¸«à¸±à¸•à¸–à¹Œ","à¸šà¸­à¸£à¸°à¹€à¸à¹‡à¸”","à¸Ÿà¸¸à¸•à¸à¸²à¸—","à¸§à¸±à¸™à¸—à¸¢à¸²à¸§à¸¸à¸˜","à¸šà¸±à¸‡à¸ªà¸¸à¸à¸¸à¸¥","à¹€à¸Ÿà¸‹à¸šà¸¸à¹Šà¸","à¸§à¸´à¹ˆà¸‡à¹€à¸›à¸µà¹‰à¸¢à¸§","à¸šà¸²à¸”à¸—à¸°à¸¢à¸±à¸",
"à¸ à¸²à¸à¸¢à¸™à¸•à¸£à¹Œ","à¸§à¸´à¹ˆà¸‡à¸œà¸¥à¸±à¸”","à¸šà¸³à¹€à¸«à¸™à¹‡à¸ˆ","à¸¡à¸‡à¸à¸¸à¸","à¸§à¸´à¸”à¸µà¹‚à¸­","à¸šà¸´à¸“à¸‘à¸šà¸²à¸•","à¸¡à¸“à¸‘à¸›","à¸§à¸´à¸«à¸²à¸£à¸„à¸”","à¸šà¸¸à¸„à¸¥à¸²à¸à¸£","à¸¡à¸±à¸„à¸„à¸¸à¹€à¸—à¸¨à¸à¹Œ",
"à¸§à¸µà¸”à¸´à¸—à¸±à¸¨à¸™à¹Œ","à¹€à¸šà¸à¸ˆà¹€à¸à¸ª","à¸¡à¸±à¸„à¸™à¸²à¸¢à¸","à¹€à¸§à¸—à¸¡à¸™à¸•à¸£à¹Œ","à¹€à¸šà¸£à¸","à¸¡à¸±à¸”à¸•à¸£à¸²à¸ªà¸±à¸‡","à¹€à¸§à¸™à¸„à¸·à¸™","à¹‚à¸š","à¸¡à¸¸à¸à¸•à¸¥à¸","à¸¨à¸µà¸£à¸©à¸°","à¸›à¸£à¸°à¸”à¸´à¸”à¸›à¸£à¸°à¸”à¸­à¸¢",
"à¹à¸¡à¹ˆà¹‚à¸à¸ªà¸","à¸ªà¹„à¸š","à¸›à¸¥à¸²à¸ªà¹€à¸•à¸­à¸£à¹Œ","à¸¢à¹ˆà¸­à¸¡à¹€à¸¢à¸²","à¸ªà¸±à¸‡à¹€à¸à¸•","à¸›à¸´à¸à¸™à¸´à¸","à¸£à¸–à¹€à¸¡à¸¥à¹Œ","à¸ªà¸±à¸‡à¹€à¸‚à¸›","à¸ªà¸±à¸™à¹‚à¸”à¸©","à¹‚à¸«à¸£à¸°à¸à¸²","à¸­à¸¸à¸šà¸²à¸—à¸§à¹Œ",
"à¸ªà¸±à¸¡à¸¡à¸™à¸²","à¸­à¸‡à¸„à¸Šà¸²à¸•","à¹à¸­à¸›à¸à¸¥à¸´à¹€à¸„à¸Šà¸±à¸™","à¸ªà¸²à¸šà¹€à¸ªà¸·à¹‰à¸­","à¸­à¸™à¸¸à¸à¸²à¸•","à¸›à¸²à¸£à¸²à¸Šà¸´à¸","à¸ªà¸²à¸›à¹à¸Šà¹ˆà¸‡","à¸­à¹€à¸™à¸à¸›à¸£à¸°à¸ªà¸‡à¸„à¹Œ","à¹„à¸­à¸¨à¸à¸£à¸µà¸¡","à¸ªà¸²à¸¢à¸ªà¸´à¸à¸ˆà¸™à¹Œ",
"à¸­à¸­à¸Ÿà¸Ÿà¸´à¸¨","à¸à¸£à¸°à¸—à¸°","à¹€à¸«à¸¥à¹‡à¸à¹ƒà¸™","à¸­à¸±à¸à¸Šà¸±à¸™","à¸à¸°à¸¥à¸°à¹à¸¡","à¸ªà¸³à¸­à¸²à¸‡","à¸­à¸±à¸›à¸£à¸µà¸¢à¹Œ","à¸à¸´à¸ˆà¸ˆà¸°à¸¥à¸±à¸à¸©à¸“à¸°","à¸ªà¸´à¸£à¸´à¸¡à¸‡à¸„à¸¥","à¸­à¸²à¹€à¸ˆà¸µà¸¢à¸™","à¸à¸¸à¸¢à¸Šà¹ˆà¸²à¸¢",
"à¹€à¸ªà¸™à¹ˆà¸«à¹Œ","à¸­à¸²à¸™à¸´à¸ªà¸‡à¸ªà¹Œ","à¸‚à¸¶à¹‰à¸™à¸‰à¹ˆà¸²à¸¢","à¸«à¸¥à¸‡à¹ƒà¸«à¸¥","à¸­à¸²à¹€à¸à¸¨","à¸„à¸£à¸´à¸ªà¸•à¹Œà¸¨à¸±à¸à¸£à¸²à¸Š","à¸«à¸¥à¸±à¸šà¹ƒà¸«à¸¥","à¸­à¸´à¹€à¸¥à¹‡à¸à¸—à¸£à¸­à¸™à¸´à¸à¸ªà¹Œ","à¸šà¸²à¸£à¹Œà¹‚à¸„à¸”",
"à¹€à¸«à¸¥à¹‡à¸à¹„à¸«à¸¥","à¸­à¸µà¹€à¸¡à¸¥","à¸ˆà¸±à¸•à¸¸à¸£à¸±à¸ª","à¸”à¸´à¸¥à¸´à¹€à¸§à¸­à¸£à¸µ","à¸–à¸±à¹ˆà¸§à¸à¸¹","à¸™à¸±à¸™à¸—à¸™à¸²à¸à¸²à¸£","à¸šà¸¥à¹‡à¸­à¸","à¸›à¸£à¸°à¸ˆà¸±à¸™à¸«à¸™à¹‰à¸²","à¸›à¸£à¸°à¸•à¸´à¸¡à¸²à¸à¸£à¸£à¸¡","à¹à¸œà¹ˆà¸«à¸¥à¸²",
"à¸¡à¸«à¸£à¸ªà¸","à¸¡à¸µà¹ˆà¸ªà¸±à¹‰à¸§","à¸£à¸±à¸‡à¸ªà¸£à¸£à¸„à¹Œ","à¸­à¸±à¸›à¹€à¸”à¸•","à¹€à¸”à¹‡à¸à¹à¸§à¹‰à¸™" ];

/*â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  2.  DOM REFERENCES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€*/
const voiceSelect   = document.getElementById('voiceSelect');
const startBtn      = document.getElementById('startBtn');
const trainer       = document.getElementById('trainer');
const repeatBtn     = document.getElementById('repeatBtn');
const showAnswerBtn = document.getElementById('showAnswerBtn');
const answerForm    = document.getElementById('answerForm');
const answerInput   = document.getElementById('answerInput');
const feedback      = document.getElementById('feedback');

const progressBar   = document.getElementById('progressBar');
const leftCounter   = document.getElementById('leftCounter');
const wrongCounter  = document.getElementById('wrongCounter');
const wrongList     = document.getElementById('wrongList');

/*â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  3.  VOICE PICKER
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€*/
let selectedVoice = null;

function buildVoiceList () {
  const voices = speechSynthesis.getVoices().filter(v => v.lang?.startsWith('th'));
  voiceSelect.innerHTML = voices.map((v, i) =>
    `<option value="${i}">${v.name}${/female|à¸«à¸à¸´à¸‡|kang|à¸à¸±à¸‡|à¸à¸§/i.test(v.name) ? ' (F)'
                     : /male|à¸Šà¸²à¸¢|sir|à¸ªà¸´à¸£à¸´/i.test(v.name)   ? ' (M)' : ''}</option>`
  ).join('');
  voiceSelect.selectedIndex = voices.findIndex(v => /female|à¸«à¸à¸´à¸‡|kang|à¸à¸±à¸‡|à¸à¸§/i.test(v.name)) || 0;
  selectedVoice = voices[voiceSelect.selectedIndex] || null;
}
speechSynthesis.onvoiceschanged = buildVoiceList;
buildVoiceList();

voiceSelect.onchange = () => {
  const voices = speechSynthesis.getVoices().filter(v => v.lang?.startsWith('th'));
  selectedVoice = voices[voiceSelect.value] || null;
};

const speak = word => {
  const u = new SpeechSynthesisUtterance(`à¸„à¸³à¸§à¹ˆà¸² ${word}`);
  u.lang  = 'th-TH';
  if (selectedVoice) u.voice = selectedVoice;
  speechSynthesis.cancel();
  speechSynthesis.speak(u);
};

/*â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  4.  QUEUES & STATE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€*/
const TOTAL_WORDS = WORDS.length;
progressBar.max   = TOTAL_WORDS;

let mainQ   = [];          // words not yet seen
let reviewQ = [];          // each word missed once
let queue   = [];          // alias â€“ whichever list weâ€™re drilling
let current = '';
let showingAnswer = false;

const wrongWords = new Set();

/*â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  5.  HELPERS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€*/
const shuffle = a => { for (let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]];} return a; };

function updateStats () {
  leftCounter.textContent  = `à¹€à¸«à¸¥à¸·à¸­à¸„à¸³: ${mainQ.length}`;
  wrongCounter.textContent = `à¸„à¸³à¸—à¸µà¹ˆà¸•à¸­à¸šà¸œà¸´à¸”: ${wrongWords.size}`;
  progressBar.value        = TOTAL_WORDS - mainQ.length;
}

function addWrong (word) {
  if (!wrongWords.has(word)) {
    wrongWords.add(word);
    wrongList.insertAdjacentHTML('beforeend', `<li>${word}</li>`);
  }
  if (!reviewQ.includes(word)) reviewQ.push(word);
  updateStats();
}

/*â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  6.  DRILL LOOP
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€*/
function nextWord () {
  showingAnswer = false;

  // pick a queue to draw from
  if (!queue.length) {
    queue = mainQ.length ? mainQ : reviewQ;          // auto-switch to review after main
    if (!queue.length) {                             // both empty â‡’ finished
      trainer.innerHTML = '<h2>à¹€à¸ªà¸£à¹‡à¸ˆà¸ªà¸´à¹‰à¸™! âœ”ï¸</h2>';
      return;
    }
  }

  current = queue.shift();     // remove from front (affects mainQ or reviewQ)
  updateStats();

  answerInput.value = '';
  answerInput.focus();
  feedback.textContent = '';
  speak(current);
}

/*â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  7.  EVENTS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€*/
answerForm.addEventListener('submit', e => {
  e.preventDefault();
  const typed = answerInput.value.trim();

  if (typed === current) {             // âœ”ï¸ correct â€“ move on
    feedback.textContent = 'âœ”ï¸ à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡';
    nextWord();
  } else {                             // âŒ wrong â€“ stay on same word
    feedback.textContent = 'âŒ à¸¥à¸­à¸‡à¹ƒà¸«à¸¡à¹ˆâ€¦';
    addWrong(current);
    speak(current);
    answerInput.select();
  }
});

repeatBtn.onclick      = () => speak(current);

showAnswerBtn.onclick  = () => {
  if (showingAnswer) return;
  feedback.textContent = `â†’ ${current}`;
  addWrong(current);           // log & schedule for review
  showingAnswer = true;        // stay on this word until typed correctly
  answerInput.focus();
};

startBtn.onclick = () => {
  mainQ   = shuffle([...WORDS]);   // fresh run
  reviewQ = [];
  queue   = mainQ;
  wrongWords.clear();
  wrongList.innerHTML = '';

  updateStats();
  startBtn.style.display = 'none';
  trainer.style.display  = 'block';
  nextWord();
};
</script>

</body>
</html>
